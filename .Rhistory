trump_bw <- apply(trump, 1:2, mean)
writePNG(trump_bw, target = "trump_bw.png")
affine = niftyreg(
source = trump_bw,
target = obama_bw)
out_aff = as(affine$image, "array")
writePNG(out_aff, target = "trump_bw_affine.png")
out = niftyreg(
source = trump_bw,
target = obama_bw,
scope = "nonlinear",
init=forward(affine))
out_nonlin_withna = as(out$image, "array")
writePNG(out_nonlin_withna,
target = "trump_bw_nonlin_with_NA.png")
# remove NAs
out_nonlin = out_nonlin_withna
out_nonlin[ is.nan(out_nonlin)] = 0
out_nonlin[ out_nonlin < 0] = 0
out_nonlin[ out_nonlin > 1] = 1
writePNG(out_nonlin,
target = "trump_bw_nonlin.png")
ratio = obama_bw / out_nonlin
writePNG(ratio, target = "ob_to_tr_nonlin_ratio.png")
diff = obama_bw - out_nonlin
writePNG(diff, target = "ob_to_tr_nonlin_diff.png")
# cut off bottom
inds = 120:420
obama_cut = obama_bw
obama_cut =obama_cut[ inds, ]
display(obama_cut)
trump_cut = out_nonlin
trump_cut = trump_cut[ inds, ]
display(trump_cut)
mid_inds = 240:370
trump_cut[,mid_inds]
display(trump_cut[,mid_inds])
rat_cut = ratio[inds, mid_inds]
writePNG(rat_cut,
target = "ratio_cut.png")
diff_cut = diff[inds, mid_inds]
writePNG(diff_cut,
target = "diff_cut.png")
obama_darker = obama_bw > out_nonlin
class(obama_darker) = "numeric"
writePNG(obama_darker,
target = "obama_darker.png")
tr_darker = obama_bw < out_nonlin
class(tr_darker) = "numeric"
writePNG(tr_darker,
target = "trump_darker.png")
trump_cut = out_nonlin[inds, mid_inds]
writePNG(trump_cut,
target = "trump_cut.png")
obama_cut = obama_bw[inds, mid_inds]
writePNG(obama_cut,
target = "obama_cut.png")
library(jpeg)
ob = readJPEG("peak-obama-from-wash-mon.jpg")
ob = readJPEG("peak_obama_from_wash-mon.jpg")
tr = readJPEG("peak-trump-from-wash-mon.jpg")
display(ob)
display(tr)
dim(b)
dim(ob)
display(tr)
obama_bw <- apply(ob, 1:2, mean)
# https://www.nytimes.com/interactive/2017/01/20/us/politics/trump-inauguration-crowd.html
# http://www.nydailynews.com/news/national/reuters-editor-defends-photo-president-trump-inauguration-article-1.2953125
rm(list = ls())
library(RNiftyReg)
library(png)
library(EBImage)
library(jpeg)
# tr = readImage("trump.png")
# colorMode(tr) = Grayscale
# ob = readImage("obama.png")
# colorMode(ob) = Grayscale
# grayimage <- channel(ob,"gray")
# writeImage(ob, "obama_bw.png")
obama = readPNG("obama.png")
trump = readPNG("trump.png")
obama = readJPEG("peak_obama_from_wash-mon.jpg")
trump = readJPEG("peak-trump-from-wash-mon.jpg")
obama = obama[,, 1:3]
obama_bw <- apply(obama, 1:2, mean)
writePNG(obama_bw, target = "obama_bw.png")
trump = trump[,, 1:3]
trump_bw <- apply(trump, 1:2, mean)
writePNG(trump_bw, target = "trump_bw.png")
affine = niftyreg(
source = trump_bw,
target = obama_bw)
out_aff = as(affine$image, "array")
writePNG(out_aff, target = "trump_bw_affine.png")
out = niftyreg(
source = trump_bw,
target = obama_bw,
scope = "nonlinear",
init=forward(affine))
out_nonlin_withna = as(out$image, "array")
writePNG(out_nonlin_withna,
target = "trump_bw_nonlin_with_NA.png")
# remove NAs
out_nonlin = out_nonlin_withna
out_nonlin[ is.nan(out_nonlin)] = 0
out_nonlin[ out_nonlin < 0] = 0
out_nonlin[ out_nonlin > 1] = 1
writePNG(out_nonlin,
target = "trump_bw_nonlin.png")
ratio = obama_bw / out_nonlin
writePNG(ratio, target = "ob_to_tr_nonlin_ratio.png")
diff = obama_bw - out_nonlin
writePNG(diff, target = "ob_to_tr_nonlin_diff.png")
# cut off bottom
inds = 120:420
obama_cut = obama_bw
obama_cut =obama_cut[ inds, ]
display(obama_cut)
trump_cut = out_nonlin
trump_cut = trump_cut[ inds, ]
display(trump_cut)
mid_inds = 240:370
trump_cut[,mid_inds]
display(trump_cut[,mid_inds])
rat_cut = ratio[inds, mid_inds]
writePNG(rat_cut,
target = "ratio_cut.png")
diff_cut = diff[inds, mid_inds]
writePNG(diff_cut,
target = "diff_cut.png")
obama_darker = obama_bw > out_nonlin
class(obama_darker) = "numeric"
writePNG(obama_darker,
target = "obama_darker.png")
tr_darker = obama_bw < out_nonlin
class(tr_darker) = "numeric"
writePNG(tr_darker,
target = "trump_darker.png")
trump_cut = out_nonlin[inds, mid_inds]
writePNG(trump_cut,
target = "trump_cut.png")
obama_cut = obama_bw[inds, mid_inds]
writePNG(obama_cut,
target = "obama_cut.png")
# tr_skew <- applyTransform(out, trump_bw,)
# display(house_skewed)
# fixed = antsImageRead("trump.png")
# # libpng warning: iCCP: known incorrect sRGB profile
# moving = antsImageRead("obama.png")
# # libpng warning: iCCP: known incorrect sRGB profile
# reg = antsRegistration(fixed = fixed, moving = moving,
#     typeofTransform="Rigid", verbose = TRUE)
display(out_aff)
system("open")
system("open .")
# https://www.nytimes.com/interactive/2017/01/20/us/politics/trump-inauguration-crowd.html
# http://www.nydailynews.com/news/national/reuters-editor-defends-photo-president-trump-inauguration-article-1.2953125
rm(list = ls())
library(RNiftyReg)
library(png)
library(EBImage)
library(jpeg)
# obama = readPNG("obama.png")
# trump = readPNG("trump.png")
obama_stub = "peak_obama_from_wash-mon"
trump_stub = "peak_trump_from_wash_mon"
obama = readJPEG(paste0(obama_stub, ".jpg"))
trump = readJPEG(paste0(trump_stub, ".jpg"))
make_png_name = function(stub, ending,
sep = "_",
ext = ".png") {
paste0(paste0(stub, ending, sep = sep), ext)
}
obama = obama[,, 1:3]
obama_bw <- apply(obama, 1:2, mean)
writePNG(obama_bw, target = make_png_name(obama_stub, "bw"))
# https://www.nytimes.com/interactive/2017/01/20/us/politics/trump-inauguration-crowd.html
# http://www.nydailynews.com/news/national/reuters-editor-defends-photo-president-trump-inauguration-article-1.2953125
rm(list = ls())
library(RNiftyReg)
library(png)
library(EBImage)
library(jpeg)
# obama = readPNG("obama.png")
# trump = readPNG("trump.png")
obama_stub = "peak_obama_from_wash_mon"
trump_stub = "peak_trump_from_wash_mon"
obama = readJPEG(paste0(obama_stub, ".jpg"))
trump = readJPEG(paste0(trump_stub, ".jpg"))
# https://www.nytimes.com/interactive/2017/01/20/us/politics/trump-inauguration-crowd.html
# http://www.nydailynews.com/news/national/reuters-editor-defends-photo-president-trump-inauguration-article-1.2953125
rm(list = ls())
library(RNiftyReg)
library(png)
library(EBImage)
library(jpeg)
# obama = readPNG("obama.png")
# trump = readPNG("trump.png")
obama_stub = "peak_obama_from_wash_mon"
trump_stub = "peak_trump_from_wash_mon"
obama = readJPEG(paste0(obama_stub, ".jpg"))
trump = readJPEG(paste0(trump_stub, ".jpg"))
make_png_name = function(stub, ending,
sep = "_",
ext = ".png") {
paste0(paste0(stub, ending, sep = sep), ext)
}
make_png_name(obama_stub, "bw")
# https://www.nytimes.com/interactive/2017/01/20/us/politics/trump-inauguration-crowd.html
# http://www.nydailynews.com/news/national/reuters-editor-defends-photo-president-trump-inauguration-article-1.2953125
rm(list = ls())
library(RNiftyReg)
library(png)
library(EBImage)
library(jpeg)
# obama = readPNG("obama.png")
# trump = readPNG("trump.png")
obama_stub = "peak_obama_from_wash_mon"
trump_stub = "peak_trump_from_wash_mon"
obama = readJPEG(paste0(obama_stub, ".jpg"))
trump = readJPEG(paste0(trump_stub, ".jpg"))
make_png_name = function(stub, ending,
sep = "_",
ext = ".png") {
paste0(paste(stub, ending, sep = sep), ext)
}
make_png_name(obama_stub, "bw")
obama = obama[,, 1:3]
obama_bw <- apply(obama, 1:2, mean)
writePNG(obama_bw, target = make_png_name(obama_stub, "bw"))
# https://www.nytimes.com/interactive/2017/01/20/us/politics/trump-inauguration-crowd.html
# http://www.nydailynews.com/news/national/reuters-editor-defends-photo-president-trump-inauguration-article-1.2953125
rm(list = ls())
library(RNiftyReg)
library(png)
library(EBImage)
library(jpeg)
# obama = readPNG("obama.png")
# trump = readPNG("trump.png")
obama_stub = "peak_obama_from_wash_mon"
trump_stub = "peak_trump_from_wash_mon"
obama = readJPEG(paste0(obama_stub, ".jpg"))
trump = readJPEG(paste0(trump_stub, ".jpg"))
make_png_name = function(stub, ending,
sep = "_",
ext = ".png") {
paste0(paste(stub, ending, sep = sep), ext)
}
obama = obama[,, 1:3]
obama_bw <- apply(obama, 1:2, mean)
writePNG(obama_bw, target = make_png_name(obama_stub, "bw"))
trump = trump[,, 1:3]
trump_bw <- apply(trump, 1:2, mean)
writePNG(trump_bw, target =  make_png_name(trump_stub, "bw"))
affine = niftyreg(
source = trump_bw,
target = obama_bw)
out_aff = as(affine$image, "array")
writePNG(out_aff, target = make_png_name(trump_stub, "bw_affine"))
out = niftyreg(
source = trump_bw,
target = obama_bw,
scope = "nonlinear",
init = forward(affine))
out_nonlin_withna = as(out$image, "array")
writePNG(out_nonlin_withna,
target = make_png_name(trump_stub, "bw_nonlin_with_NA"))
# remove NAs
out_nonlin = out_nonlin_withna
out_nonlin[ is.nan(out_nonlin)] = 0
out_nonlin[ out_nonlin < 0] = 0
out_nonlin[ out_nonlin > 1] = 1
writePNG(out_nonlin,
target = make_png_name(trump_stub, "bw_nonlin"))
ratio = obama_bw / out_nonlin
writePNG(ratio, target = make_png_name(obama_stub, "_compared_to_trump_ratio"))
diff = obama_bw - out_nonlin
writePNG(diff, target = make_png_name(obama_stub, "_compared_to_trump_diff"))
# https://www.nytimes.com/interactive/2017/01/20/us/politics/trump-inauguration-crowd.html
# http://www.nydailynews.com/news/national/reuters-editor-defends-photo-president-trump-inauguration-article-1.2953125
rm(list = ls())
library(RNiftyReg)
library(png)
library(EBImage)
library(jpeg)
# obama = readPNG("obama.png")
# trump = readPNG("trump.png")
obama_stub = "peak_obama_from_wash_mon_833"
trump_stub = "peak_trump_from_wash_mon_833"
# obama_stub = "obama"
# trump_stub = "trump"
# ext = ".png"
ext = ".jpg"
func = switch(ext,
".jpg" = readJPEG,
".png" = readPNG)
obama = func(paste0(obama_stub, ext))
trump = func(paste0(trump_stub, ext))
make_png_name = function(stub, ending,
sep = "_",
ext = ".png") {
paste0(paste(stub, ending, sep = sep), ext)
}
obama = obama[,, 1:3]
obama_bw <- apply(obama, 1:2, mean)
writePNG(obama_bw,
target = make_png_name(obama_stub, "bw"))
trump = trump[,, 1:3]
trump_bw <- apply(trump, 1:2, mean)
writePNG(trump_bw, target =  make_png_name(trump_stub, "bw"))
affine = niftyreg(
source = trump_bw,
target = obama_bw)
out_aff = as(affine$image, "array")
writePNG(out_aff, target = make_png_name(trump_stub, "bw_affine"))
out = niftyreg(
source = trump_bw,
target = obama_bw,
scope = "nonlinear",
init = forward(affine))
out_nonlin_withna = as(out$image, "array")
writePNG(out_nonlin_withna,
target = make_png_name(trump_stub, "bw_nonlin_with_NA"))
# remove NAs
out_nonlin = out_nonlin_withna
out_nonlin[ is.nan(out_nonlin)] = 0
out_nonlin[ out_nonlin < 0] = 0
out_nonlin[ out_nonlin > 1] = 1
writePNG(out_nonlin,
target = make_png_name(trump_stub, "bw_nonlin"))
ratio = obama_bw / out_nonlin
writePNG(ratio,
target = make_png_name(obama_stub, "_compared_to_trump_ratio"))
diff = obama_bw - out_nonlin
writePNG(diff,
target = make_png_name(obama_stub, "_compared_to_trump_diff"))
# cut off bottom
source('~/Dropbox/Projects/obama_overlap/ants_reg.R', echo=TRUE)
# https://www.nytimes.com/interactive/2017/01/20/us/politics/trump-inauguration-crowd.html
# http://www.nydailynews.com/news/national/reuters-editor-defends-photo-president-trump-inauguration-article-1.2953125
rm(list = ls())
library(RNiftyReg)
library(png)
library(EBImage)
library(jpeg)
# obama = readPNG("obama.png")
# trump = readPNG("trump.png")
# obama_stub = "peak_obama_from_wash_mon"
# trump_stub = "peak_trump_from_wash_mon"
# obama_stub = "obama"
# trump_stub = "trump"
ext = ".png"
func = switch(ext,
".jpg" = readJPEG,
".png" = readPNG)
obama = func(paste0(obama_stub, ext))
trump = func(paste0(trump_stub, ext))
# https://www.nytimes.com/interactive/2017/01/20/us/politics/trump-inauguration-crowd.html
# http://www.nydailynews.com/news/national/reuters-editor-defends-photo-president-trump-inauguration-article-1.2953125
rm(list = ls())
library(RNiftyReg)
library(png)
library(EBImage)
library(jpeg)
# obama = readPNG("obama.png")
# trump = readPNG("trump.png")
obama_stub = "peak_obama_from_wash_mon"
trump_stub = "peak_trump_from_wash_mon"
# obama_stub = "obama"
# trump_stub = "trump"
ext = ".png"
func = switch(ext,
".jpg" = readJPEG,
".png" = readPNG)
obama = func(paste0(obama_stub, ext))
trump = func(paste0(trump_stub, ext))
make_png_name = function(stub, ending,
sep = "_",
ext = ".png") {
paste0(paste(stub, ending, sep = sep), ext)
}
obama = obama[,, 1:3]
obama_bw <- apply(obama, 1:2, mean)
writePNG(obama_bw,
target = make_png_name(obama_stub, "bw"))
trump = trump[,, 1:3]
trump_bw <- apply(trump, 1:2, mean)
writePNG(trump_bw,
target =  make_png_name(trump_stub, "bw"))
# https://www.nytimes.com/interactive/2017/01/20/us/politics/trump-inauguration-crowd.html
# http://www.nydailynews.com/news/national/reuters-editor-defends-photo-president-trump-inauguration-article-1.2953125
rm(list = ls())
library(RNiftyReg)
library(png)
library(EBImage)
library(jpeg)
# obama = readPNG("obama.png")
# trump = readPNG("trump.png")
obama_stub = "peak_obama_from_wash_mon"
trump_stub = "peak_trump_from_wash_mon"
ext = ".jpg"
# obama_stub = "obama"
# trump_stub = "trump"
# ext = ".png"
func = switch(ext,
".jpg" = readJPEG,
".png" = readPNG)
obama = func(paste0(obama_stub, ext))
trump = func(paste0(trump_stub, ext))
make_png_name = function(stub, ending,
sep = "_",
ext = ".png") {
paste0(paste(stub, ending, sep = sep), ext)
}
obama = obama[,, 1:3]
obama_bw <- apply(obama, 1:2, mean)
writePNG(obama_bw,
target = make_png_name(obama_stub, "bw"))
trump = trump[,, 1:3]
trump_bw <- apply(trump, 1:2, mean)
writePNG(trump_bw,
target =  make_png_name(trump_stub, "bw"))
affine = niftyreg(
source = trump_bw,
target = obama_bw)
out_aff = as(affine$image, "array")
writePNG(out_aff,
target = make_png_name(trump_stub, "bw_affine"))
out = niftyreg(
source = trump_bw,
target = obama_bw,
scope = "nonlinear",
init = forward(affine))
out_nonlin_withna = as(out$image, "array")
writePNG(out_nonlin_withna,
target = make_png_name(trump_stub, "bw_nonlin_with_NA"))
# remove NAs
out_nonlin = out_nonlin_withna
out_nonlin[ is.nan(out_nonlin)] = 0
out_nonlin[ out_nonlin < 0] = 0
out_nonlin[ out_nonlin > 1] = 1
writePNG(out_nonlin,
target = make_png_name(trump_stub, "bw_nonlin"))
ratio = obama_bw / out_nonlin
writePNG(ratio,
target = make_png_name(obama_stub,
"compared_to_trump_ratio"))
diff = obama_bw - out_nonlin
writePNG(diff,
target = make_png_name(obama_stub,
"compared_to_trump_diff"))
display(obama_bw)
display(out_nonlin)
obama_stub = "peak_trump_from_cap"
# https://www.nytimes.com/interactive/2017/01/20/us/politics/trump-inauguration-crowd.html
# http://www.nydailynews.com/news/national/reuters-editor-defends-photo-president-trump-inauguration-article-1.2953125
rm(list = ls())
library(RNiftyReg)
library(png)
library(EBImage)
library(jpeg)
# obama = readPNG("obama.png")
# trump = readPNG("trump.png")
obama_stub = "peak_obama_from_cap"
trump_stub = "peak_trump_from_cap"
ext = ".jpg"
# obama_stub = "obama"
# trump_stub = "trump"
# ext = ".png"
func = switch(ext,
".jpg" = readJPEG,
".png" = readPNG)
obama = func(paste0(obama_stub, ext))
trump = func(paste0(trump_stub, ext))
make_png_name = function(stub, ending,
sep = "_",
ext = ".png") {
paste0(paste(stub, ending, sep = sep), ext)
}
obama = obama[,, 1:3]
obama_bw <- apply(obama, 1:2, mean)
writePNG(obama_bw,
target = make_png_name(obama_stub, "bw"))
trump = trump[,, 1:3]
trump_bw <- apply(trump, 1:2, mean)
writePNG(trump_bw,
target =  make_png_name(trump_stub, "bw"))
affine = niftyreg(
source = trump_bw,
target = obama_bw)
out_aff = as(affine$image, "array")
writePNG(out_aff,
target = make_png_name(trump_stub, "bw_affine"))
out = niftyreg(
source = trump_bw,
target = obama_bw,
scope = "nonlinear",
init = forward(affine))
out_nonlin_withna = as(out$image, "array")
writePNG(out_nonlin_withna,
target = make_png_name(trump_stub, "bw_nonlin_with_NA"))
source('~/Dropbox/Projects/obama_overlap/ants_reg.R')
trump_cut = reg_aff[inds, mid_inds]
writePNG(trump_cut,
target = make_png_name(trump_stub,
"cut"))
obama_cut = obama_bw[inds, mid_inds]
writePNG(obama_cut,
target = make_png_name(obama_stub,
"cut"))
source('~/Dropbox/Projects/obama_overlap/ants_reg.R')
